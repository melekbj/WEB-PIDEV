
{% extends 'baseAdmin.html.twig' %}

{% block title %}Liste des stores{% endblock %}

{% block body %}
  <head>
<!-- Flashy depends on jQuery -->
    <script src="//code.jquery.com/jquery.js"></script>
</head>

	<!-- Layout wrapper -->
	<div class="layout-wrapper layout-content-navbar">
		<div
			class="layout-container">
			<!-- Layout container -->
			<div
				class="layout-page">

				<!-- Content wrapper -->
				<div
					class="content-wrapper">
					<!-- Content -->
					<div class="container-xxl flex-grow-1 container-p-y">
						<div class="row">
							<div class="col-lg-12 mb-4 order-0">
								<div class="card">
									<div class="d-flex align-items-end row">
										<div class="col-md-12">
											<div
												class="card-body">
											<button class="btn btn-success" data-toggle="modal" data-target="#exampleModal" >Create new category</button>
											<a href="{{path('app_categorie_store_index')}}"> Consulter la liste des categories</a>
												<!-- Contextual Classes -->

												<div class="card">
													<h5 class="card-header">Liste des stores</h5>
													<div class="table-responsive text-nowrap">
														
	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">New Event Type</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					{{form_start(typeForm)}}
					{{form_errors(typeForm)}}

					{{form_end(typeForm)}}
				</div>
				<div class="modal-footer">{# <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> #}
					{# <button type="submit" class="btn btn-primary">Save changes</button> #}
				</div>
			</div>
		</div>
	</div>


<form action="{{ path('app_store_index') }}" method="GET" class="form-inline">
	<div class="container">
		<div class="row">
			<div class="col-sm-4">
				<div class="form-group">
					<label for="nom">Name:</label>
					<input type="text" name="nom" id="nom" class="form-control">
				</div>
			</div>
			{# <div class="col-sm-4">
				<div class="form-group">
					<label for="location">Location:</label>
					<select name="location" id="location" class="form-control">
						<option value="">None</option>
						<option value="Ariana">Ariana</option>
						<option value="Beja">Beja</option>
						<option value="Ben Arous">Ben Arous</option>
						<option value="Bizerte">Bizerte</option>
						<option value="Gabes">Gabes</option>
						<option value="Gafsa">Gafsa</option>
						<option value="Jendouba">Jendouba</option>
						<option value="Kairouan">Kairouan</option>
						<option value="Kasserine">Kasserine</option>
						<option value="Kebili">Kebili</option>
						<option value="Kef">Kef</option>
						<option value="Mahdia">Mahdia</option>
						<option value="Manouba">Manouba</option>
						<option value="Medenine">Medenine</option>
						<option value="Monastir">Monastir</option>
						<option value="Nabeul">Nabeul</option>
						<option value="Sfax">Sfax</option>
						<option value="Sidi Bouzid">Sidi Bouzid</option>
						<option value="Siliana">Siliana</option>
						<option value="Sousse">Sousse</option>
						<option value="Tataouine">Tataouine</option>
						<option value="Tozeur">Tozeur</option>
						<option value="Tunis">Tunis</option>
						<option value="Zaghouan">Zaghouan</option>
					</select>
				</div>
			</div> #}
			<div class="col-sm-4">
				<div class="mt-4">
					<button class="btn btn-primary" type="submit">Filter</button>
				</div>
			</div>
		</div>
	</div>


</form>







    <br>
    <table class="table">
        <thead>
            <tr>
                <th>Store owner</th>
                <th>Store name</th>
                <th>Location</th>
                <th>Photo</th>
                <th>Categorie</th>
                {# <th>Rating</th> #}
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for store in stores %}
            <tr>
                <td>{{ store.user.nom }} {{ store.user.prenom }}</td>
                <td>{{ store.nom }}</td>
                <td>{{ store.location }}</td>

                    {% set imageUrl = vich_uploader_asset(store, 'imageFile') %}
					<td><img src="{{ asset(imageUrl) }}" alt="user-avatar" style="width:50px"></td>

                <td>{{ store.categorie.libelle }}</td>
                {# <td>
                    {% set rating = averageRatings[store.id] %}
                    {% if rating %}
                        <div class="star-rating">
                            {% set ratingValue = rating|round(1) %}
                            {% set fullStars = ratingValue|round(0, 'ceil') %}
                            {% set emptyStars = 5 - fullStars %}
                            {% for i in 1..fullStars %}
                                <i class="fas fa-star"></i>
                            {% endfor %}
                            {% if ratingValue > fullStars %}
                                <i class="fas fa-star-half-alt"></i>
                                {% set emptyStars = emptyStars - 1 %}
                            {% endif %}
                            {% for i in 1..emptyStars %}
                                <i class="far fa-star"></i>
                            {% endfor %}
                            <span class="rating-value">{{ ratingValue }}/5</span>
                        </div>
                    {% endif %}
                </td> #}
                <td>
                    <a href="{{ path('app_store_show', {'id': store.id}) }}">show</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
													</div>
												</div>
												<!-- / Content -->

											</div>
											<!-- Content wrapper -->
										</div>
										<!-- / Layout page -->
									</div>

									<!-- Overlay -->
								</div>
								<!-- / Layout wrapper -->


							{% endblock %}


							{# data-toggle="modal" data-target="#exampleModal" #}
							{# <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
							                    <div class="modal-dialog" role="document">
							                      <div class="modal-content">
							                        <div class="modal-header">
							                              <h5 class="modal-title" id="exampleModalLabel">Edit Informations</h5>
							                        </div>
							                          <div class="modal-body">
							
							                              <form id="edit-user-form">
							                                {% for flash_message in app.session.flashbag.get('error') %}
							                                  <div class="alert alert-danger">{{ flash_message }}</div>
							                                {% endfor %}
							
							                                {% for flash_message in app.session.flashbag.get('success') %}
							                                  <div class="alert alert-success">{{ flash_message }}</div>
							                                {% endfor %}
							
							                                <input type="text" id="nom" name="nom"  />
							                                <input type="text" id="prenom"  name="prenom" />
							
							                                <div class="modal-footer">
							                                
							                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							                                  <button type="submit" class="btn btn-primary">Save changes</button>
							                                
							                                </div>
							
							                              </form>
							                          </div>
							                          
							                        </div>
							                      </div>
							                  </div>  #}


