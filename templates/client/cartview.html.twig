{% extends 'base.html.twig' %}

{% block body %}
	<br>
	<br>
	<br>

	<br>
	<br>
	<br>
	<br>

	<div>
	   {% if error %}
		<table>
			<th>Erreur
			</th>

			<td>
				
				<h3 style="background-color: red;">
					{{error}}</h3>

			</td>


		</table>
		 {% endif %}

	</div>
	<div class="cart-list">
		{% set sum = 0 %}
		{% for product in produits %}

			{% set sum = sum +  product.produit.prix * product.quantity %}

			<div class="product-widget">
				<div class="product-img">
					<img src="{{asset('Assets/img/product01.png')}}" alt="">
				</div>
				<div class="product-body">
					<h3 class="product-name">
						<a href="#">
							{{product.produit.nom}}
						</a>
					</h3>
					<h4 class="product-price">
						<span class="qty">
							{{product.quantity}}
							x</span>$
						{{product.produit.prix}}
					</h4>
					<h5>TOTAL: $
						{{product.quantity * product.produit.prix}}
					</h5>


					{% if product.quantity > product.produit.quantite %}
						<h3 style="background-color: red;">
							Available quantity =
							{{ product.produit.quantite }}</h3>
					{% endif %}
					{% set addToCartPath = path('app_cart_addscript', {'id': product.produit.id}) %}

					<a href={{addToCartPath}}>
						add one</a>


					{% set removefromCartPath = path('app_cart_removescript', {'id': product.produit.id}) %}
					<a href={{removefromCartPath}}>
						remove one</a>


				</div>
				<button class="delete">
					<i class="fa fa-close"></i>
				</button>
			</div>
		</div>
	{% endfor %}


	<div class="cart-summary">
		<small>
			{{ produits|length }}
			Item(s) selected</small>
		<h5>SUBTOTAL: $
			{{sum}}
		</h5>
	</div>

	<form action="{{ path('app_cart_confirm') }}" method="post">
		<label for="destination">Destination:</label>
		<input type="text" name="destination" id="destination">

		<button type="submit">Payment Process
		</button>
	</form>


{% endblock %}
