{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block body %}
<br><br><br><br><br>
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				<div class="login100-pic js-tilt" data-tilt>
					<img class="imgLogin" src="{{ asset('LoginAssets/images/login2.png')}}" alt="IMG">
				</div>

				<form method="post" class="login100-form validate-form">

                    {% for flash_message in app.session.flashbag.get('error') %}
                        <div class="alert alert-danger">{{ flash_message }}</div>
                    {% endfor %}

                    {% for flash_message in app.session.flashbag.get('success') %}
                        <div class="alert alert-success">{{ flash_message }}</div>
                    {% endfor %}

                    {% for flash_message in app.session.flashbag.get('info') %}
                        <div class="alert alert-info">{{ flash_message }}</div>
                    {% endfor %}

                    {# {% if error %}
                        <div class="alert alert-danger">
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </div>
                    {% endif %} #}

                    {% if error %}
                        <div class="alert alert-danger">
                            {{ error }}
                        </div>
                    {% endif %}


                    {% if app.user is not null and app.user.getEtat() == 0 %}
                        <div class="mb-3">
                            You are logged in as {{ app.user.userIdentifier }}, <a href="{{ path('app_logout') }}">Logout</a>
                        </div>
                    {% endif %}

					<span class="title">
						<h3>Join us </h3>
					</span>
                    <div class="gif">
                     <img src="{{ asset('LoginAssets/images/Ripple.gif')}}" alt="Loading" />
                    </div>
                    

                    <div class="wrap-input100 validate-input " data-validate = "Valid email is required: ex@abc.xyz">
                        <input class="input100" type="email" value="{{ last_username }}" name="email" id="inputEmail" placeholder="E-mail" class="form-control" autocomplete="email" required autofocus>
                        <span class="focus-input100"></span>
                            <span class="symbol-input100">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                            </span>
					</div>

                    <div class="wrap-input100 validate-input" data-validate = "Password is required">
                        <input class="input100" type="password" placeholder="Password" name="password" id="inputPassword" class="form-control" autocomplete="current-password" required>
                        <span class="focus-input100"></span>
                            <span class="symbol-input100">
                                <i class="fa fa-lock" aria-hidden="true"></i>  
                            </span>
                            <span class="symbol-input" ><i class="fa fa-eye toggle-password" aria-hidden="true"></i></span>
                            
                    </div>

                    {# <div class="wrap-input100 validate-input" data-validate="Password is required" style="display: flex; justify-content: ;">
                        <input class="input100" type="password" placeholder="Password" name="password" id="inputPassword" class="form-control" autocomplete="current-password" required>
                        <span class="focus-input100"></span>
                        <span class="symbol-input100">
                            <i class="fa fa-lock" aria-hidden="true"></i>  
                        </span>
                        <span><i class="fa fa-eye toggle-password" aria-hidden="true"></i></span>
                    </div> #}

                    <input type="hidden" name="_csrf_token"
                        value="{{ csrf_token('authenticate') }}"
                    >
                    <script>
                        const togglePassword = document.querySelector('.toggle-password');
                        const password = document.querySelector('#inputPassword');

                        togglePassword.addEventListener('click', function (e) {
                            // toggle the type attribute
                            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
                            password.setAttribute('type', type);
                            // toggle the eye slash icon
                            this.classList.toggle('fa-eye-slash');
                        });
                    </script>

                    

					<div class="container-login100-form-btn">
						<button class="login100-form-btn " type="submit">
							Se connecter
						</button>
					</div>

					{# <div class="text-center">
						<span class="txt1">
							Forgot
						</span>
						<a href="{{ path('forgotten_password') }}" class="txt2">
							Password?
						</a>
					</div> #}

					<div class=" divtxt3 text-center" >
						<a class="txt3" href="{{ path('app_registration') }}">
							Create your Account
							<i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
						</a>
					</div>

                    
				</form>
			</div>
		</div>
	</div>

<br><br><br>




{% endblock %}





